<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Protected Resource</title>
  </head>
  <body>
    <div id="app">
      <h1>Protected Resource</h1>
      <pre>{{ message }}</pre>
    </div>
    
    <script src="https://unpkg.com/vue@3.2.20/dist/vue.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.4/axios.min.js"></script>
    <script>
      const app = Vue.createApp({
        data() {
          return {
            message: null,
          }
        },
        async created() {
          try {
            const accessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6OCwibG9naW4iOiJ5dGF5YSIsImVtYWlsIjoieXRheWFAc3R1ZGVudC4xMzM3Lm1hIiwiaWF0IjoxNjc4NDE4NjE2LCJleHAiOjE2Nzg0NjE4MTZ9.olHsDB3hxaV_OYSFOUsVViuTcezgEqw0scNqf-aDLD0';
            const headers = { Authorization: `Bearer ${accessToken}` };
            const response = await axios.get('http://localhost:8080/user/all', { headers });
            this.message = response.data;
          } catch (error) {
            console.error(error);
            this.message = 'Error: ' + error.message;
          }
        },
      });
      
      app.mount('#app');
    </script>
  </body>
</html>
